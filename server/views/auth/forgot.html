{% extends "../document.html" %}

{% macro queryString(query) -%}
    {% for name, value in query -%}
        {{ '?' if loop.first else '&' }}{{ name | urlencode }}={{ value | urlencode }}
    {%- endfor %}
{%- endmacro %}

{% block content %}
<h1>{{ __('auth.forgot.heading') }}</h1>
<form action="{{ routes('auth/forgot') }}{{ queryString(query) if (query and isVerified) }}" method="post">
    {% if isVerified %}
        <div>
            <label for="password">{{ __('common.form.password') }}</label>
            <input type="password" name="password" id="password" />
            {% if errors.password %}<p>{{ errors.password.msg }}</p>{% endif %}
        </div>
        <button>{{ __('auth.forgot.form.submit') }}</button>
    {% else %}
        <div>
            <label for="email">{{ __('common.form.email') }}</label>
            <input type="email" name="email" id="email" value="{{ body.email }}" />
            {% if errors.email %}<p>{{ errors.email.msg }}</p>{% endif %}
        </div>
        <button>{{ __('auth.forgot.form.submit') }}</button>
    {% endif %}
</form>
{% endblock %}